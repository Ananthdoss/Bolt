<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3"/>
<title>Bolt: Building Bolt</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Bolt
   &#160;<span id="projectnumber">1.1</span>
   </div>
   <div id="projectbrief">C++ template library with support for OpenCL</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Building Bolt </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#cloning_bolt">Cloning the Bolt source from GitHub</a><ul><li class="level2"><a href="#clone">Clone Bolt</a></li>
</ul>
</li>
<li class="level1"><a href="#forking_bolt">Forking the Bolt source from GitHub</a><ul><li class="level2"><a href="#fork">Fork Bolt</a></li>
<li class="level2"><a href="#branches">Bolt branches on GitHub</a></li>
</ul>
</li>
<li class="level1"><a href="#cmake">Using CMake build infrastructure</a><ul><li class="level2"><a href="#cmake_overview">CMake Overview</a></li>
<li class="level2"><a href="#cl_dependencies">OpenCL&tm; Dependencies</a></li>
</ul>
</li>
<li class="level1"><a href="#config">CMake Bolt Configuration</a><ul><li class="level2"><a href="#startup">Startup projects</a></li>
<li class="level2"><a href="#compDependency">Supported compilers</a></li>
</ul>
</li>
<li class="level1"><a href="#bolt_directories">Code layout</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="cloning_bolt"></a>
Cloning the Bolt source from GitHub</h1>
<h2><a class="anchor" id="clone"></a>
Clone Bolt</h2>
<p>There are many available git clients for both Windows &reg; and Linux &reg;. If you are already familiar with git, the quick start instructions are to choose your favorite client and issue a <code>git clone <a href="https://github.com/HSA-Libraries/Bolt">https://github.com/HSA-Libraries/Bolt</a> </code>. If you are not familiar with git, you have to first install a git client on your host OS in order to 'clone' the Bolt code onto your computer. For Linux &reg;, if git is not already included in your distribution (type git &ndash;version at your commandline), then most likely you can still use the native OS's package manager system to easily install the git package; the package is usually called 'git' or 'git-core'. For Windows &reg;, a variety of options also exist, but you may have to manually install a package that you download from the web. The recommended package that seems easiest to use is <a href="http://windows.github.com/">GitHub for Windows &reg;</a>. Once installed, it helps you create a GitHub account if you don't already have one, and creates private/public RSA keys that are tied to your account that allows git to remember who you are so that you don't have to type your credentials every time you want to push or pull code from github. However, if you want to use the the most current version of git, that is freely available from <a href="http://git-scm.com/downloads">http://git-scm.com/downloads</a>. With either package, you may open a git prompt and clone the repository.</p>
<h1><a class="anchor" id="forking_bolt"></a>
Forking the Bolt source from GitHub</h1>
<h2><a class="anchor" id="fork"></a>
Fork Bolt</h2>
<p>GitHub maintains a concept of forking a project, separate from the idea of cloning a project. After a github user account is created, it is possible to 'fork' a project into your personal account repository which is a complete copy of the original repository. It will have a slightly different upstream URL that includes your account name and you can start hacking on the code as you please. You may issue a 'pull request' back to the original project if you feel like your code contribution will be useful. At the top right corner of the <a href="https://github.com/HSA-Libraries/Bolt">Bolt GitHub</a> page is a button that forks the Bolt code into your private repository. This is a nice shortcut as the button will create the new repository with multiple upstream URL's, allowing new code to be fetched from either the original repository or your own.</p>
<h2><a class="anchor" id="branches"></a>
Bolt branches on GitHub</h2>
<h1><a class="anchor" id="cmake"></a>
Using CMake build infrastructure</h1>
<h2><a class="anchor" id="cmake_overview"></a>
CMake Overview</h2>
<p>Bolt does not provide Microsoft Visual Studio project files, makefiles, or any other native build infrastructure for its examples. Instead, the examples directory contains a file named CMakeLists.txt. Bolt uses CMake as a 'master' build system, and native build files, such as Visual Studio projects, nmake makefiles, UNIX makefiles, or Mac xcode projects are GENERATED with CMake. CMake is very similar to the autoconf tool 'configure', except that it is cross-platform. <br/>
<em><b>NOTE:</b> With CMAKE the native OS build files are GENERATED, so changes made to the native build files are overwritten the next time cmake runs.</em></p>
<p>CMake is freely available for download on the web from:<br/>
 <a href="http://www.cmake.org/" class="external">http://www.cmake.org/</a> </p>
<h2><a class="anchor" id="cl_dependencies"></a>
OpenCLâ„¢ Dependencies</h2>
<p>Bolt's OpenCL&trade; projects have a dependency on the AMD APP SDK and the AMD OpenCL &trade; runtime provided by the Catalyst &trade; drivers. OpenCL &trade; is regarded as a cross-platform, vendor-neutral API and BOLT uses the C++ static kernel template extension available in the AMD OpenCL &trade; implementation that to date are not found in other vendor implementations. During its configuration, CMake requires an environment variable to find the root of the OpenCL &trade; installation. Provide this by defining the environment variable <b>AMDAPPSDKROOT</b> with the path to the root of the OpenCL &trade; SDK, typically <code>'C:/Program Files (x86)/AMD APP'</code> on Windows &reg; 64-bit machines. A more vendor-neutral environment variable is <b>OPENCL_ROOT</b>.</p>
<div class="image">
<img src="opencl_environment_variable2.png" alt="opencl_environment_variable2.png"/>
<div class="caption">
Environment variable setup screen</div></div>
<p><b> NOTE </b>: On <b> Linux &reg; </b>, set the environment variable by <code> 'export OPENCL_ROOT = /opt/AMDAPP/' </code></p>
<p>CMake ships with several interfaces to help a developer generate native build files. CMake has a GUI interface called CMake-gui that incorporates the traditional point-and-click conventions of buttons, list boxes, and search boxes. For CLI-based sytems (including CMD from Windows &reg;), CMake has a native command-line executable (the GUI is just a wrapper around the command line). The command line executable is useful, even in Windows &reg;, for scripting purposes, such as might be used with automated and continuous build systems.</p>
<h1><a class="anchor" id="config"></a>
CMake Bolt Configuration</h1>
<p>Once installed, the easiest interface for Linux &reg; or Windows &reg; is the CMake GUI program <b>'cmake-gui' </b>. The terminal applications CMake.exe and ccmake.exe (based on curses library) are easy to learn. CMake automates the creation of build environments in a cross-platform manner, generating native build files for each respective platform. When launched, it inspects the host computer and searches for all tools, SDKs, libraries, and code necessary to build the project.</p>
<p><code>Bolt/superbuild</code> contains all the CMake files necessary for configuring Bolt. In the CMake Window, enter the source code and binary URIs as given in the image below and press Configure. You can also use the 'Browse Source ...' and "Browse Build..." buttons to navigate to the <code>superbuild</code> and <code>binary</code> folder. It is better not to put the <code>bin</code> directory inside any folder which has a <code></code>.git folder as a sibling or as a parent structure. </p>
<div class="image">
<img src="cmake.bolt_build.blank.png" alt="cmake.bolt_build.blank.png"/>
<div class="caption">
Bolt superbuild</div></div>
<p>Then, click on the Configure button. This will ask you for your choice of generator. You can choose to use Visual Studio 10 or Visual Studio 11. In this example, 'Visual Studio 11 Win64' generator is selected. The selected bin directory should be descriptive of the generator used ; otherwise it's easy to start over (delete the binaries directory). <b> On Linux &reg;</b>, choose the Unix Makefiles option. After selecting the generator, CMake examines the system, finding all the project dependencies and properties, which appear red in the properties box. </p>
<div class="image">
<img src="cmake.pick.generator2.png" alt="cmake.pick.generator2.png"/>
<div class="caption">
List of CMake generators</div></div>
<p> While CMake finishes configuring the projects, it prints messages in the output log visible in the bottom textbox within the GUI; this states that CMake found the OpenCL &trade; and Bolt libraries. If not, CMake prints in red text which libraries or header files are missing. This usually means the environment variables that CMake uses to find dependencies are not set up properly (see <a class="el" href="buildingExamples.html#clDependencies">OpenCL&trade; Dependencies</a> ). </p>
<div class="image">
<img src="cmake.build.first.configure2.png" alt="cmake.build.first.configure2.png"/>
<div class="caption">
Cmake system introspection</div></div>
<p> CMake gives you some values which represent some features that you can choose to generate. In this example below, we chose not to generate BUILD_TBB (see <a class="el" href="buildingTBB.html#tbb">TBB (Intel)</a> on how to build TBB for Bolt). Now, press the Configure button again to continue, and then press Generate button to complete the generation of binaries. Now, all the project files will be generated to the specified location.</p>
<p><b> NOTE: </b> On <b> Linux &reg; </b>, do not select the BUILD_AMP feature.</p>
<h2><a class="anchor" id="startup"></a>
Startup projects</h2>
<p><b> On Windows &reg; </b>, after a successful configuration pass, the directory specified initially in the <code>'Where to build the binaries:'</code> textbox contains an 'Bolt.Superbuild.sln' file, which can be opened in the appropriate version of Visual Studio. At this point, selecting the 'Build Solution' menu item builds all the samples selected. By default, Visual Studio will have the 'ALL_BUILD' project selected as the <code>'Startup'</code> project. If a particular solution must be run under a debugger, mark it <code>'Startup'</code> by first right-clicking on the project, then selecting <code>'Set as Startup Project'</code>. On building this solution, required libraries such as <a href="http://www.boost.org/users/download/">Boost</a>, <a href="http://www.stack.nl/~dimitri/doxygen/download.html">Doxygen</a>, and <a href="https://code.google.com/p/googletest/downloads/list">Gtest</a> are downloaded, and it also builds all the projects in Bolt. To start developing, go to <code>Bolt-build</code> folder in your <code>binary</code> folder and open 'Bolt.sln'. This will have all the project files i.e. Tests, Benchmarks, Tools, Runtimes etc. You can build tests for projects by setting it as a 'Startup' project and by building the project. You run the tests (Google Tests) by clicking the start button in the Debug Menu in Visual Studio.</p>
<p><b> On Linux &reg;</b>, open the terminal and change the directory to the one specified initially in the <code>'Where to build the binaries:'</code> Run make in that directory for superbuilding BOLT. Change the directory to Bolt-build and run make to build all project files. Indivisual projects can also be built by running make in the corresponding project directory.</p>
<h2><a class="anchor" id="compDependency"></a>
Supported compilers</h2>
<p>On <b> Windows &reg; </b>, Bolt currently uses type traits introduced in Visual Studio 2010. We hope to support additional compilers at some time. On <b> Linux &reg; </b>, GCC is supported. We also hope to add MinGW support in future.</p>
<h1><a class="anchor" id="bolt_directories"></a>
Code layout</h1>
<p>This is a list of bolt directories: Bolt/</p>
<ul>
<li>bench/ - contains benchmarking codes for Bolt routines.</li>
<li>bolt/ - contains bolt runtime library calls. Contents are packaged as a bolt binary library.</li>
<li>doxy/ - contains files required for generating the doxygen documentation for Bolt.</li>
<li>examples/ - contains some example codes on how to use Bolt.</li>
<li>include/ - contains header files and inline files of all the supported Bolt routines.</li>
<li>superbuild/ - contains CMakeFiles required to build a superbuild binary file for Bolt.</li>
<li>test/ - contains testing solution files for all the routines in Bolt.</li>
<li>tools/ - contains some useful scripts and codes. </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Nov 11 2013 14:17:20 for Bolt by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3
</small></address>
</body>
</html>
